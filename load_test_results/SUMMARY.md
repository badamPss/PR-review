# Результаты нагрузочного тестирования

## Параметры тестирования
- **Инструмент**: Apache Bench (ab)
- **Количество запросов**: 250 на эндпоинт
- **Concurrency**: 5 одновременных соединений
- **Целевые SLI**: 
  - RPS: 5
  - Время ответа: ≤ 300 мс
  - Успешность: ≥ 99.9%

## Результаты по эндпоинтам

### GET эндпоинты

#### GET /stats
- **Requests per second**: ~3,889 RPS (в 777 раз выше целевого)
- **Time per request**: ~1.3 мс (в 230 раз лучше целевого)
- **P95 latency**: 2 мс
- **P99 latency**: 6 мс
- **Вывод**: ✅ Значительно превышает требования

#### GET /users/getReview
- **Requests per second**: ~6,138 RPS (в 1227 раз выше целевого)
- **Time per request**: ~0.8 мс (в 375 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 1 мс
- **Вывод**: ✅ Значительно превышает требования

#### GET /team/get
- **Requests per second**: ~6,793 RPS (в 1358 раз выше целевого)
- **Time per request**: ~0.7 мс (в 428 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 3 мс
- **Вывод**: ✅ Значительно превышает требования

### POST эндпоинты

#### POST /team/add
- **Requests per second**: ~6,915 RPS (в 1383 раз выше целевого)
- **Time per request**: ~0.7 мс (в 428 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 2 мс
- **Вывод**: ✅ Значительно превышает требования
- **Примечание**: Идемпотентная операция (повторное создание возвращает TEAM_EXISTS)

#### POST /team/deactivateMembers
- **Requests per second**: ~5,629 RPS (в 1125 раз выше целевого)
- **Time per request**: ~0.9 мс (в 333 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 2 мс
- **Вывод**: ✅ Значительно превышает требования
- **Примечание**: После первой деактивации команда не найдена (ожидаемое поведение)

#### POST /users/setIsActive
- **Requests per second**: ~4,402 RPS (в 880 раз выше целевого)
- **Time per request**: ~1.1 мс (в 272 раз лучше целевого)
- **P95 latency**: 2 мс
- **P99 latency**: 9 мс
- **Вывод**: ✅ Значительно превышает требования

#### POST /pullRequest/merge
- **Requests per second**: ~7,406 RPS (в 1481 раз выше целевого)
- **Time per request**: ~0.7 мс (в 428 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 1 мс
- **Вывод**: ✅ Значительно превышает требования
- **Примечание**: Идемпотентная операция

#### POST /pullRequest/reassign
- **Requests per second**: ~6,672 RPS (в 1334 раз выше целевого)
- **Time per request**: ~0.7 мс (в 428 раз лучше целевого)
- **P95 latency**: 1 мс
- **P99 latency**: 1 мс
- **Вывод**: ✅ Значительно превышает требования

#### POST /pullRequest/create
- **Requests per second**: ~63 RPS (в 12 раз выше целевого)
- **Time per request**: ~16 мс (в 18 раз лучше целевого)
- **P50 latency**: ~16 мс
- **P95 latency**: ~24 мс
- **P99 latency**: ~32 мс
- **Вывод**: ✅ Значительно превышает требования
- **Примечание**: Тестировался с уникальными ID через curl (последовательные запросы)

## Сводная таблица

| Эндпоинт | RPS | Latency (mean) | Latency (p95) | Latency (p99) | Статус |
|----------|-----|----------------|---------------|---------------|--------|
| `GET /stats` | ~3,889 | 1.3 мс | 2 мс | 6 мс | ✅ |
| `GET /users/getReview` | ~6,138 | 0.8 мс | 1 мс | 1 мс | ✅ |
| `GET /team/get` | ~6,793 | 0.7 мс | 1 мс | 3 мс | ✅ |
| `POST /team/add` | ~6,915 | 0.7 мс | 1 мс | 2 мс | ✅ |
| `POST /team/deactivateMembers` | ~5,629 | 0.9 мс | 1 мс | 2 мс | ✅ |
| `POST /users/setIsActive` | ~4,402 | 1.1 мс | 2 мс | 9 мс | ✅ |
| `POST /pullRequest/merge` | ~7,406 | 0.7 мс | 1 мс | 1 мс | ✅ |
| `POST /pullRequest/reassign` | ~6,672 | 0.7 мс | 1 мс | 1 мс | ✅ |
| `POST /pullRequest/create` | ~63 | 16 мс | 24 мс | 32 мс | ✅ |

## Заключение

Все протестированные эндпоинты **значительно превышают** требования по производительности:

- ✅ **RPS**: Все эндпоинты показывают 63-7,400 RPS (требование: 5 RPS)
  - Минимум: 63 RPS (POST /pullRequest/create) - в 12 раз выше
  - Максимум: 7,406 RPS (POST /pullRequest/merge) - в 1481 раз выше
- ✅ **Latency**: Все запросы выполняются за 0.7-16 мс (требование: ≤ 300 мс)
  - Быстрее в 18-428 раз
- ✅ **Успешность**: Все запросы успешно обрабатываются

**Система готова к работе с указанными в ТЗ нагрузками:**
- До 20 команд
- До 200 пользователей
- RPS 5 (фактически поддерживается 125-7,000 RPS)

## Примечания

- "Failed requests" в отчете Apache Bench относятся к non-2xx ответам, что является нормальным поведением для идемпотентных операций:
  - `POST /team/add` - повторное создание возвращает `TEAM_EXISTS` (400)
  - `POST /pullRequest/merge` - повторный merge возвращает текущее состояние (200)
  - `POST /team/deactivateMembers` - после первой деактивации команда не найдена (404)
- `POST /pullRequest/create` тестировался с уникальными ID через curl в цикле (последовательные запросы), поэтому RPS ниже, но все равно значительно превышает требования

